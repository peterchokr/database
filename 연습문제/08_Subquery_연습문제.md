# Ch8 ì„œë¸Œì¿¼ë¦¬ - ì—°ìŠµë¬¸ì œ

í•™ìƒ ì—¬ëŸ¬ë¶„! 8ì¥ì„ ì™„ë£Œí•œ í›„ ë‹¤ìŒ ì—°ìŠµë¬¸ì œë¥¼ í†µí•´ ê°œë…ì„ í™•ì¸í•´ë³´ì„¸ìš”.
ê° ì„¹ì…˜ì˜ ë‚œì´ë„ë¥¼ í™•ì¸í•˜ê³  ë‹¨ê³„ë³„ë¡œ ê³µë¶€í•˜ì‹œë©´ ë©ë‹ˆë‹¤.

---

## ğŸ“Œ í•™ìŠµ ëª©í‘œ í™•ì¸

8ì¥ì„ ë§ˆì¹œ í›„ ë‹¤ìŒì„ ì´í•´í•´ì•¼ í•©ë‹ˆë‹¤:
- ì„œë¸Œì¿¼ë¦¬(ë¶€ë¶„ì§ˆì˜)ì˜ ê°œë…ê³¼ í•„ìš”ì„±
- SELECT ì ˆì˜ ì„œë¸Œì¿¼ë¦¬ (ìŠ¤ì¹¼ë¼ ì„œë¸Œì¿¼ë¦¬)
- FROM ì ˆì˜ ì„œë¸Œì¿¼ë¦¬ (ì¸ë¼ì¸ ë·°)
- WHERE ì ˆì˜ ì„œë¸Œì¿¼ë¦¬ (ìƒê´€ ì„œë¸Œì¿¼ë¦¬)
- IN, EXISTS ì—°ì‚°ì
- ì„œë¸Œì¿¼ë¦¬ vs JOIN

---

# ê°ê´€ì‹ ë¬¸ì œ (10ê°œ)

## ì´ˆê¸‰ ìˆ˜ì¤€ (5ê°œ) - ê¸°ë³¸ ê°œë… í™•ì¸

**1ë²ˆ** ì„œë¸Œì¿¼ë¦¬(Subquery)ì˜ ê¸°ë³¸ ì •ì˜ëŠ”?
- â‘  ì£¼ìš” ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•˜ê¸° ì „ì— ë¨¼ì € ì‹¤í–‰í•˜ëŠ” ì¿¼ë¦¬
- â‘¡ ë‹¤ë¥¸ ì¿¼ë¦¬ ë‚´ì— í¬í•¨ëœ ì¿¼ë¦¬
- â‘¢ ì—¬ëŸ¬ í…Œì´ë¸”ì„ JOINí•˜ëŠ” ì¿¼ë¦¬
- â‘£ GROUP BYë¥¼ ì‚¬ìš©í•˜ëŠ” ì¿¼ë¦¬

---

**2ë²ˆ** ë‹¤ìŒ ì¤‘ ìŠ¤ì¹¼ë¼ ì„œë¸Œì¿¼ë¦¬ëŠ” ì–´ë””ì— ì‚¬ìš©ë˜ëŠ”ê°€?
- â‘  SELECT ì ˆì—ì„œ ë‹¨ì¼ ê°’ ë°˜í™˜
- â‘¡ FROM ì ˆì—ì„œ í…Œì´ë¸”ì²˜ëŸ¼ ì‚¬ìš©
- â‘¢ WHERE ì ˆì—ì„œ ì¡°ê±´ ë¹„êµ
- â‘£ ORDER BY ì ˆì—ì„œ ì •ë ¬

---

**3ë²ˆ** ì„œë¸Œì¿¼ë¦¬ê°€ ë°˜í™˜í•  ìˆ˜ ìˆëŠ” ê²°ê³¼ í˜•íƒœë¡œ ì˜³ì§€ ì•Šì€ ê²ƒì€?
- â‘  ë‹¨ì¼ í–‰, ë‹¨ì¼ ì—´ (ìŠ¤ì¹¼ë¼ ê°’)
- â‘¡ ë‹¨ì¼ í–‰, ì—¬ëŸ¬ ì—´
- â‘¢ ì—¬ëŸ¬ í–‰, ë‹¨ì¼ ì—´ (ëª©ë¡)
- â‘£ ì—¬ëŸ¬ í–‰, ì—¬ëŸ¬ ì—´

---

**4ë²ˆ** IN ì—°ì‚°ìì˜ ìš©ë„ëŠ”?
- â‘  ì„œë¸Œì¿¼ë¦¬ê°€ ì—¬ëŸ¬ í–‰ì˜ ê²°ê³¼ë¥¼ ë°˜í™˜í•  ë•Œ ê²€ìƒ‰
- â‘¡ NULL ê°’ í™•ì¸
- â‘¢ ë²”ìœ„ ê²€ìƒ‰
- â‘£ íŒ¨í„´ ë§¤ì¹­

---

**5ë²ˆ** EXISTS ì—°ì‚°ìì˜ íŠ¹ì§•ì€?
- â‘  ì„œë¸Œì¿¼ë¦¬ ê²°ê³¼ê°€ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸
- â‘¡ ì„œë¸Œì¿¼ë¦¬ ê²°ê³¼ì˜ í–‰ ê°œìˆ˜ í™•ì¸
- â‘¢ ì„œë¸Œì¿¼ë¦¬ ê²°ê³¼ê°’ ë¹„êµ
- â‘£ ì„œë¸Œì¿¼ë¦¬ ê²°ê³¼ ì •ë ¬

---

## ì¤‘ê¸‰ ìˆ˜ì¤€ (3ê°œ) - ê°œë… ì ìš©

**6ë²ˆ** ë‹¤ìŒ ì¤‘ ì„œë¸Œì¿¼ë¦¬ê°€ ì˜¬ë°”ë¥´ê²Œ ì‚¬ìš©ëœ ê²ƒì€?

```sql
â‘  SELECT name, (SELECT MAX(salary) FROM employees) AS max_salary
   FROM employees;

â‘¡ SELECT name, salary
   FROM employees
   WHERE salary > (SELECT AVG(salary) FROM employees);

â‘¢ SELECT e.name
   FROM employees e
   WHERE e.dept_id IN (SELECT dept_id FROM departments);
```

- â‘  ì˜¬ë°”ë¦„ (SELECT ì ˆ ìŠ¤ì¹¼ë¼ ì„œë¸Œì¿¼ë¦¬)
- â‘¡ ì˜¬ë°”ë¦„ (WHERE ì ˆ ì„œë¸Œì¿¼ë¦¬)
- â‘¢ ì˜¬ë°”ë¦„ (WHERE ì ˆ IN ì„œë¸Œì¿¼ë¦¬)
- â‘£ â‘ â‘¡â‘¢ ëª¨ë‘ ì˜¬ë°”ë¦„

---

**7ë²ˆ** FROM ì ˆì˜ ì„œë¸Œì¿¼ë¦¬(ì¸ë¼ì¸ ë·°)ë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ëŠ”?
- â‘  ë³µì¡í•œ ê³„ì‚°ì„ ë¨¼ì € ìˆ˜í–‰ í›„ ê²°ê³¼ì—ì„œ ë‹¤ì‹œ ì¡°íšŒ
- â‘¡ ì„±ëŠ¥ í–¥ìƒ
- â‘¢ ì½”ë“œ ê°„ê²°í™”
- â‘£ ë‹¤ì¤‘ í…Œì´ë¸” ì¡°ì¸ í•„ìš”

---

**8ë²ˆ** ìƒê´€ ì„œë¸Œì¿¼ë¦¬(Correlated Subquery)ì˜ íŠ¹ì§•ì€?
- â‘  ì™¸ë¶€ ì¿¼ë¦¬ì˜ ê°’ì„ ì°¸ì¡°
- â‘¡ ê° í–‰ë§ˆë‹¤ ì„œë¸Œì¿¼ë¦¬ ì‹¤í–‰
- â‘¢ JOINìœ¼ë¡œ ë³€í™˜ ê°€ëŠ¥
- â‘£ ëª¨ë‘ ë§ìŒ

---

## ê³ ê¸‰ ìˆ˜ì¤€ (2ê°œ) - ë¹„íŒì  ì‚¬ê³ 

**9ë²ˆ** ë‹¤ìŒ ë‘ ì¿¼ë¦¬ì˜ ì„±ëŠ¥ ì°¨ì´ëŠ”?

```
ì¿¼ë¦¬ A: ì„œë¸Œì¿¼ë¦¬ ì‚¬ìš©
SELECT name FROM employees
WHERE dept_id IN (SELECT dept_id FROM departments);

ì¿¼ë¦¬ B: JOIN ì‚¬ìš©
SELECT DISTINCT e.name FROM employees e
JOIN departments d ON e.dept_id = d.dept_id;
```

- â‘  ì¿¼ë¦¬ Aê°€ í•­ìƒ ë” ë¹ ë¦„
- â‘¡ ì¿¼ë¦¬ Bê°€ í•­ìƒ ë” ë¹ ë¦„
- â‘¢ ìƒí™©ì— ë”°ë¼ ë‹¤ë¦„ (ë°ì´í„°ëŸ‰, ì¸ë±ìŠ¤ ë“±)
- â‘£ ì„±ëŠ¥ì´ ì™„ì „íˆ ê°™ìŒ

---

**10ë²ˆ** ì„œë¸Œì¿¼ë¦¬ì™€ JOIN ì¤‘ ì–¸ì œ ì„œë¸Œì¿¼ë¦¬ë¥¼ ì„ íƒí•˜ëŠ”ê°€?

- â‘  ê°™ì€ í…Œì´ë¸”ì„ ì—¬ëŸ¬ ë²ˆ ì°¸ì¡°í•  ë•Œ
- â‘¡ ì¡°ì¸í•  ë‹¤ë¥¸ í…Œì´ë¸”ì—ì„œ ë‹¨ìˆœ ê°’ë§Œ í•„ìš”í•  ë•Œ
- â‘¢ ì§‘ê³„ ê²°ê³¼ë¥¼ ì¡°ê±´ìœ¼ë¡œ ì‚¬ìš©í•  ë•Œ
- â‘£ â‘¡â‘¢ì˜ ê²½ìš°

---

# ì£¼ê´€ì‹ ë¬¸ì œ (5ê°œ)

## ì´ˆê¸‰ ìˆ˜ì¤€ (3ê°œ)

**11ë²ˆ** ì„œë¸Œì¿¼ë¦¬ì˜ ì •ì˜ì™€ í•„ìš”ì„±ì„ ì„¤ëª…í•˜ì‹œì˜¤.

---

**12ë²ˆ** ì„œë¸Œì¿¼ë¦¬ê°€ ë“¤ì–´ê°ˆ ìˆ˜ ìˆëŠ” ìœ„ì¹˜ 3ê°€ì§€ë¥¼ ì„¤ëª…í•˜ê³ , ê°ê°ì˜ íŠ¹ì§•ì„ ì„¤ëª…í•˜ì‹œì˜¤.

---

**13ë²ˆ** INê³¼ EXISTSì˜ ì°¨ì´ë¥¼ ì„¤ëª…í•˜ê³ , ê°ê° ì–¸ì œ ì‚¬ìš©í•˜ëŠ”ì§€ ì˜ˆì‹œí•˜ì‹œì˜¤.

---

## ì¤‘ê¸‰ ìˆ˜ì¤€ (1ê°œ)

**14ë²ˆ** ìƒê´€ ì„œë¸Œì¿¼ë¦¬ì˜ ê°œë…ì„ ì„¤ëª…í•˜ê³ , ë™ì‘ ë°©ì‹ê³¼ ì¼ë°˜ ì„œë¸Œì¿¼ë¦¬ì™€ì˜ ì°¨ì´ë¥¼ ì„¤ëª…í•˜ì‹œì˜¤.

---

## ê³ ê¸‰ ìˆ˜ì¤€ (1ê°œ)

**15ë²ˆ** ì„œë¸Œì¿¼ë¦¬ë¡œ í•´ê²°í•  ìˆ˜ ìˆëŠ” ë¬¸ì œë¥¼ JOINìœ¼ë¡œ í•´ê²°í•  ìˆ˜ ìˆëŠ” ê²½ìš°ì™€ ê·¸ ë°˜ëŒ€ì˜ ê²½ìš°ë¥¼ ì„¤ëª…í•˜ê³ , 
ê°ê°ì˜ ì¥ë‹¨ì ì„ ë¶„ì„í•˜ì‹œì˜¤.

---

# ì‹¤ìŠµí˜• ë¬¸ì œ (5ê°œ)

## ì´ˆê¸‰ ìˆ˜ì¤€ (2ê°œ)

**16ë²ˆ** ë‹¤ìŒ SQLì„ ì‹¤í–‰í•˜ê³  ê²°ê³¼ ìŠ¤í¬ë¦°ìƒ·ì„ ì œì‹œí•˜ì‹œì˜¤.

```sql
CREATE DATABASE ch8_subquery CHARACTER SET utf8mb4;
USE ch8_subquery;

CREATE TABLE employees (
    employee_id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(30),
    salary INT,
    dept_id INT
);

CREATE TABLE departments (
    dept_id INT PRIMARY KEY AUTO_INCREMENT,
    dept_name VARCHAR(30)
);

INSERT INTO employees VALUES
(1, 'ê¹€ì² ìˆ˜', 5000000, 1),
(2, 'ì´ì˜í¬', 4000000, 1),
(3, 'ë°•ë¯¼ì¤€', 4500000, 2),
(4, 'ìµœìˆœì‹ ', 3500000, 2),
(5, 'ê°•ê°ì°¬', 4200000, 3);

INSERT INTO departments VALUES
(1, 'ì˜ì—…ë¶€'),
(2, 'ê¸°ìˆ ë¶€'),
(3, 'ì¸ì‚¬ë¶€');

SELECT * FROM employees;
SELECT * FROM departments;
```

ì œì¶œ: employeesì™€ departments í…Œì´ë¸”ì´ ëª¨ë‘ ë³´ì´ëŠ” ìŠ¤í¬ë¦°ìƒ·

---

**17ë²ˆ** employees í…Œì´ë¸”ì—ì„œ ë‹¤ìŒì„ ìˆ˜í–‰í•˜ê³  ê²°ê³¼ë¥¼ í™•ì¸í•˜ì‹œì˜¤.

```sql
-- 1. ì „ì²´ í‰ê·  ê¸‰ì—¬ë³´ë‹¤ ë†’ì€ ì§ì›
SELECT name, salary
FROM employees
WHERE salary > (SELECT AVG(salary) FROM employees);

-- 2. í‰ê·  ê¸‰ì—¬
SELECT AVG(salary) AS avg_salary FROM employees;
```

ì œì¶œ: 2ê°œ ì¿¼ë¦¬ ê²°ê³¼ê°€ ëª¨ë‘ ë³´ì´ëŠ” ìŠ¤í¬ë¦°ìƒ·

---

## ì¤‘ê¸‰ ìˆ˜ì¤€ (2ê°œ)

**18ë²ˆ** ì„œë¸Œì¿¼ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ë‹¤ìŒì„ ì¡°íšŒí•˜ì‹œì˜¤.

```sql
-- 1. INì„ ì‚¬ìš©í•œ ì„œë¸Œì¿¼ë¦¬
SELECT name FROM employees
WHERE dept_id IN (SELECT dept_id FROM departments WHERE dept_name IN ('ì˜ì—…ë¶€', 'ê¸°ìˆ ë¶€'));

-- 2. FROM ì ˆ ì„œë¸Œì¿¼ë¦¬ (ì¸ë¼ì¸ ë·°)
SELECT * FROM (
    SELECT name, salary, dept_id
    FROM employees
    WHERE salary >= 4000000
) AS high_earners;
```

ì œì¶œ: 2ê°œ ì¿¼ë¦¬ ê²°ê³¼ê°€ ëª¨ë‘ ë³´ì´ëŠ” ìŠ¤í¬ë¦°ìƒ·

---

**19ë²ˆ** ìƒê´€ ì„œë¸Œì¿¼ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ë‹¤ìŒì„ ì¡°íšŒí•˜ì‹œì˜¤.

```sql
-- 1. ê° ë¶€ì„œì˜ í‰ê·  ê¸‰ì—¬ë³´ë‹¤ ë†’ì€ ì§ì›
SELECT e.name, e.salary, e.dept_id
FROM employees e
WHERE e.salary > (
    SELECT AVG(salary) FROM employees
    WHERE dept_id = e.dept_id
);

-- 2. EXISTSë¥¼ ì‚¬ìš©í•œ ìƒê´€ ì„œë¸Œì¿¼ë¦¬
SELECT d.dept_name
FROM departments d
WHERE EXISTS (
    SELECT 1 FROM employees e
    WHERE e.dept_id = d.dept_id
);
```

ì œì¶œ: 2ê°œ ì¿¼ë¦¬ ê²°ê³¼ê°€ ëª¨ë‘ ë³´ì´ëŠ” ìŠ¤í¬ë¦°ìƒ·

---

## ê³ ê¸‰ ìˆ˜ì¤€ (1ê°œ)

**20ë²ˆ** ë‹¤ìŒì˜ ë³µì¡í•œ ì„œë¸Œì¿¼ë¦¬ë¥¼ ì‘ì„±í•˜ê³  ì‹¤í–‰í•˜ì‹œì˜¤.

```
ìš”êµ¬ì‚¬í•­:
1. ê° ë¶€ì„œì˜ í‰ê·  ê¸‰ì—¬ë¥¼ êµ¬í•œ í›„, ê·¸ ê²°ê³¼ë¥¼ ì´ìš©í•´ 
   ê° ì§ì›ê³¼ ë¶€ì„œ í‰ê·  ê¸‰ì—¬ ë¹„êµ

2. ì—¬ëŸ¬ ê°œì˜ ì„œë¸Œì¿¼ë¦¬ë¥¼ ì¤‘ì²©(Nested Subquery)í•˜ì—¬
   íŠ¹ì • ì¡°ê±´ ë§Œì¡±í•˜ëŠ” ë°ì´í„° ì¡°íšŒ

3. ì„œë¸Œì¿¼ë¦¬ vs JOIN ë¹„êµ
   - ê°™ì€ ê²°ê³¼ë¥¼ ì–»ê¸° ìœ„í•´ ì„œë¸Œì¿¼ë¦¬ì™€ JOINìœ¼ë¡œ ê°ê° ì‘ì„±
   - ì¿¼ë¦¬ ì„±ëŠ¥ ë¹„êµ

4. ììœ ë¡œìš´ ì„œë¸Œì¿¼ë¦¬ ì¿¼ë¦¬ 2ê°œ ì´ìƒ:
   - ì§‘ê³„í•¨ìˆ˜ + ì„œë¸Œì¿¼ë¦¬
   - ì—¬ëŸ¬ ì¸µ ì¤‘ì²© ì„œë¸Œì¿¼ë¦¬
   - IN, EXISTS ì¡°í•©

ì œì¶œ:
   - ê° ì¿¼ë¦¬ì˜ SQL ì½”ë“œ
   - ê° ì¿¼ë¦¬ì˜ ì‹¤í–‰ ê²°ê³¼ ìŠ¤í¬ë¦°ìƒ·
```

---

---

# ğŸ“‹ ì •ë‹µ ë° ëª¨ë²” ë‹µì•ˆ

## ê°ê´€ì‹ ì •ë‹µ (10ê°œ)

| ë¬¸ì œ | ì •ë‹µ | í•´ì„¤ |
|:---:|:---:|:---|
| 1ë²ˆ | â‘¡ | ì„œë¸Œì¿¼ë¦¬ëŠ” ë‹¤ë¥¸ ì¿¼ë¦¬ ë‚´ì— í¬í•¨ëœ ì¿¼ë¦¬ |
| 2ë²ˆ | â‘  | ìŠ¤ì¹¼ë¼ ì„œë¸Œì¿¼ë¦¬ëŠ” SELECT ì ˆì—ì„œ ë‹¨ì¼ ê°’ ë°˜í™˜ |
| 3ë²ˆ | â‘£ | ì—¬ëŸ¬ í–‰, ì—¬ëŸ¬ ì—´ì€ ë¶ˆê°€ (í–‰ì´ë‚˜ ì—´ ë‘˜ ì¤‘ í•˜ë‚˜ëŠ” ë‹¨ìˆ˜) |
| 4ë²ˆ | â‘  | INì€ ì—¬ëŸ¬ í–‰ ê²°ê³¼ ê²€ìƒ‰ |
| 5ë²ˆ | â‘  | EXISTSëŠ” ì„œë¸Œì¿¼ë¦¬ ê²°ê³¼ ì¡´ì¬ ì—¬ë¶€ í™•ì¸ |
| 6ë²ˆ | â‘£ | â‘ â‘¡â‘¢ ëª¨ë‘ ì˜¬ë°”ë¥¸ ì„œë¸Œì¿¼ë¦¬ ì‚¬ìš© |
| 7ë²ˆ | â‘  | FROM ì„œë¸Œì¿¼ë¦¬ëŠ” ë³µì¡í•œ ê³„ì‚° í›„ ì¬ì¡°íšŒ |
| 8ë²ˆ | â‘£ | ëª¨ë‘ ë§ìŒ (ìƒê´€ ì„œë¸Œì¿¼ë¦¬ íŠ¹ì§•) |
| 9ë²ˆ | â‘¢ | ìƒí™©ì— ë”°ë¼ ì„±ëŠ¥ì´ ë‹¤ë¦„ |
| 10ë²ˆ | â‘£ | â‘¡â‘¢ ê²½ìš° ì„œë¸Œì¿¼ë¦¬ ì„ íƒ |

---

## ì£¼ê´€ì‹ ëª¨ë²” ë‹µì•ˆ (5ê°œ)

### 11ë²ˆ ì„œë¸Œì¿¼ë¦¬ì˜ ì •ì˜ì™€ í•„ìš”ì„±

**ëª¨ë²” ë‹µì•ˆ**:
```
ì •ì˜:
- ë‹¤ë¥¸ ì¿¼ë¦¬ ë‚´ì— í¬í•¨ëœ ì¿¼ë¦¬
- ë¶€ë¶„ì§ˆì˜ë¼ê³ ë„ í•¨
- ì£¼ ì¿¼ë¦¬ì™€ í•¨ê»˜ ì‘ë™

í•„ìš”ì„±:
1. ë³µì¡í•œ ì¡°ê±´ì„ ë‹¨ìˆœí™”
2. ì§‘ê³„ ê²°ê³¼ë¥¼ ì¡°ê±´ìœ¼ë¡œ ì‚¬ìš©
3. ì¤‘ê°„ ê²°ê³¼ë¥¼ ì¬ì‚¬ìš©
4. ë³µí•© ë°ì´í„° ì¡°íšŒ ê°„í¸í™”

ì˜ˆ: "í‰ê·  ê¸‰ì—¬ë³´ë‹¤ ë†’ì€ ì§ì›" ì¡°íšŒ
- ë¨¼ì € í‰ê·  êµ¬í•¨ (ì„œë¸Œì¿¼ë¦¬)
- ê·¸ ê²°ê³¼ì™€ ë¹„êµ (ì£¼ ì¿¼ë¦¬)
```

---

### 12ë²ˆ ì„œë¸Œì¿¼ë¦¬ ìœ„ì¹˜

**ëª¨ë²” ë‹µì•ˆ**:
```
1. SELECT ì ˆ - ìŠ¤ì¹¼ë¼ ì„œë¸Œì¿¼ë¦¬
   - ë‹¨ì¼ í–‰, ë‹¨ì¼ ì—´ ë°˜í™˜
   - ê° í–‰ë§ˆë‹¤ ì„œë¸Œì¿¼ë¦¬ ì‹¤í–‰
   SELECT name, (SELECT MAX(salary) ...) FROM ...

2. FROM ì ˆ - ì¸ë¼ì¸ ë·°
   - ì„œë¸Œì¿¼ë¦¬ ê²°ê³¼ë¥¼ í…Œì´ë¸”ì²˜ëŸ¼ ì‚¬ìš©
   - ë³µì¡í•œ ê³„ì‚° í›„ ì¶”ê°€ ì¡°íšŒ
   FROM (SELECT ... WHERE ...) AS subquery

3. WHERE ì ˆ - ì¡°ê±´ ì„œë¸Œì¿¼ë¦¬
   - ì¡°ê±´ ë¹„êµì— ì‚¬ìš©
   - IN, EXISTS ë“±ê³¼ í•¨ê»˜
   WHERE salary > (SELECT AVG(salary) ...)
```

---

### 13ë²ˆ IN vs EXISTS

**ëª¨ë²” ë‹µì•ˆ**:
```
IN:
- ì„œë¸Œì¿¼ë¦¬ê°€ ì—¬ëŸ¬ ê°’ ë°˜í™˜
- ë°˜í™˜ëœ ê°’ ëª©ë¡ ì¤‘ í•˜ë‚˜ì™€ ì¼ì¹˜
- ì˜ˆ: WHERE dept_id IN (1, 2, 3)

EXISTS:
- ì„œë¸Œì¿¼ë¦¬ ê²°ê³¼ ì¡´ì¬ ì—¬ë¶€ë§Œ í™•ì¸
- TRUE/FALSE ë°˜í™˜
- NULL ë¬´ì‹œ

ì–¸ì œ ì‚¬ìš©:

IN ì‚¬ìš©:
SELECT name FROM employees
WHERE dept_id IN (SELECT dept_id FROM departments);

EXISTS ì‚¬ìš©:
SELECT d.name FROM departments d
WHERE EXISTS (SELECT 1 FROM employees e WHERE e.dept_id = d.id);

ì„±ëŠ¥: EXISTSê°€ ë” ë¹ ë¥¼ ìˆ˜ ìˆìŒ (í–‰ ì¡´ì¬ë§Œ í™•ì¸)
```

---

### 14ë²ˆ ìƒê´€ ì„œë¸Œì¿¼ë¦¬

**ëª¨ë²” ë‹µì•ˆ**:
```
ì •ì˜:
- ì™¸ë¶€ ì¿¼ë¦¬ì˜ ê°’ì„ ì„œë¸Œì¿¼ë¦¬ì—ì„œ ì°¸ì¡°
- ê° í–‰ë§ˆë‹¤ ì„œë¸Œì¿¼ë¦¬ ì‹¤í–‰

ë™ì‘ ë°©ì‹:
1. ì™¸ë¶€ ì¿¼ë¦¬ì—ì„œ í–‰ ì„ íƒ
2. ê·¸ í–‰ì˜ ê°’ì„ ì„œë¸Œì¿¼ë¦¬ì— ì „ë‹¬
3. ì„œë¸Œì¿¼ë¦¬ ì‹¤í–‰
4. ê²°ê³¼ ë°˜í™˜
5. ë‹¤ìŒ í–‰ìœ¼ë¡œ ë°˜ë³µ

ì˜ˆì‹œ:
SELECT e.name FROM employees e
WHERE e.salary > (
    SELECT AVG(salary) FROM employees
    WHERE dept_id = e.dept_id  -- ì™¸ë¶€ ì¿¼ë¦¬ ì°¸ì¡°
);

ì¼ë°˜ ì„œë¸Œì¿¼ë¦¬ì™€ì˜ ì°¨ì´:
- ì¼ë°˜: ì„œë¸Œì¿¼ë¦¬ 1íšŒ ì‹¤í–‰
- ìƒê´€: í–‰ë§ˆë‹¤ ì„œë¸Œì¿¼ë¦¬ ì‹¤í–‰ (ì„±ëŠ¥ ì˜í–¥)
```

---

### 15ë²ˆ ì„œë¸Œì¿¼ë¦¬ vs JOIN

**ëª¨ë²” ë‹µì•ˆ**:
```
ì„œë¸Œì¿¼ë¦¬ë¡œë§Œ í•´ê²° ê°€ëŠ¥:
- ì§‘ê³„ í•¨ìˆ˜ ê²°ê³¼ ì¡°ê±´ ì‚¬ìš©
- ì˜ˆ: WHERE salary > (SELECT AVG(...))
- ì¼ë¶€ ìƒê´€ ì„œë¸Œì¿¼ë¦¬

JOINìœ¼ë¡œë§Œ í•´ê²° ê°€ëŠ¥:
- ê°™ì€ í…Œì´ë¸” ìì‹ ê³¼ ì—°ê²° (Self Join)
- ì˜ˆ: ì§ì›ê³¼ ê´€ë¦¬ì
- ì—¬ëŸ¬ í…Œì´ë¸” ë™ì‹œ ê²°í•©

ë‘˜ ë‹¤ ê°€ëŠ¥:
SELECT e.name FROM employees e
WHERE dept_id IN (1, 2, 3);  -- ì„œë¸Œì¿¼ë¦¬

SELECT DISTINCT e.name FROM employees e
WHERE e.dept_id IN (
    SELECT dept_id FROM departments WHERE dept_name IN (...)
);  -- JOINìœ¼ë¡œë„ ê°€ëŠ¥

ì¥ë‹¨ì :
ì„œë¸Œì¿¼ë¦¬:
- ì¥: ì½ê¸° ì‰¬ìš´ ê²½ìš° ìˆìŒ
- ë‹¨: ì„±ëŠ¥ ë¶ˆë¦¬í•  ìˆ˜ ìˆìŒ (í–‰ë§ˆë‹¤ ì‹¤í–‰)

JOIN:
- ì¥: ì¼ë°˜ì ìœ¼ë¡œ ì„±ëŠ¥ ì¢‹ìŒ
- ë‹¨: ë³µì¡í•  ìˆ˜ ìˆìŒ
```

---

## ì‹¤ìŠµí˜• ëª¨ë²” ë‹µì•ˆ (5ê°œ)

### 16ë²ˆ í…Œì´ë¸” ìƒì„±

**ì™„ë£Œ ê¸°ì¤€**:
âœ… ch8_subquery ë°ì´í„°ë² ì´ìŠ¤ ìƒì„±
âœ… employees 6ëª… ì…ë ¥
âœ… departments 3ê°œ ì…ë ¥

---

### 17ë²ˆ SELECT ì ˆ ì„œë¸Œì¿¼ë¦¬

**ì˜ˆìƒ ê²°ê³¼**:
```
1. í‰ê·  ê¸‰ì—¬: 4,240,000
2. í‰ê· ë³´ë‹¤ ë†’ì€ ì§ì›:
   - ê¹€ì² ìˆ˜ 5,000,000
   - ë°•ë¯¼ì¤€ 4,500,000
```

---

### 18ë²ˆ INê³¼ FROM ì„œë¸Œì¿¼ë¦¬

**ì™„ë£Œ ê¸°ì¤€**:
âœ… IN ì„œë¸Œì¿¼ë¦¬: ì˜ì—…ë¶€, ê¸°ìˆ ë¶€ ì§ì› ì¡°íšŒ
âœ… FROM ì„œë¸Œì¿¼ë¦¬: ê³ ì†Œë“ ì§ì› í…Œì´ë¸”ë¡œ ì¬ì¡°íšŒ

---

### 19ë²ˆ ìƒê´€ ì„œë¸Œì¿¼ë¦¬

**ëª¨ë²” ë‹µì•ˆ**:

```sql
-- 1. ë¶€ì„œ í‰ê· ë³´ë‹¤ ë†’ì€ ì§ì›
ê²°ê³¼:
ê¹€ì² ìˆ˜ 5000000 1 (ì˜ì—…ë¶€ í‰ê·  4,500,000ë³´ë‹¤ ë†’ìŒ)
ë°•ë¯¼ì¤€ 4500000 2 (ê¸°ìˆ ë¶€ í‰ê·  4,000,000ë³´ë‹¤ ë†’ìŒ)

-- 2. EXISTSë¡œ ì§ì›ì´ ìˆëŠ” ë¶€ì„œ
ê²°ê³¼:
ì˜ì—…ë¶€
ê¸°ìˆ ë¶€
ì¸ì‚¬ë¶€
```

---

### 20ë²ˆ ë³µí•© ì„œë¸Œì¿¼ë¦¬

**ëª¨ë²” ë‹µì•ˆ**:

```sql
-- 1. ë¶€ì„œë³„ í‰ê· ê³¼ ë¹„êµ
SELECT e.name, e.salary,
       (SELECT AVG(salary) FROM employees 
        WHERE dept_id = e.dept_id) AS dept_avg
FROM employees e;

-- 2. ì¤‘ì²© ì„œë¸Œì¿¼ë¦¬
SELECT name FROM employees
WHERE salary > (
    SELECT AVG(salary) FROM employees
    WHERE dept_id IN (
        SELECT dept_id FROM departments
        WHERE dept_name IN ('ì˜ì—…ë¶€', 'ê¸°ìˆ ë¶€')
    )
);

-- 3. ì„œë¸Œì¿¼ë¦¬ ë°©ì‹
SELECT DISTINCT e.name FROM employees e
WHERE e.dept_id IN (
    SELECT dept_id FROM departments
    WHERE dept_name IN ('ì˜ì—…ë¶€', 'ê¸°ìˆ ë¶€')
);

-- 3. JOIN ë°©ì‹
SELECT DISTINCT e.name FROM employees e
JOIN departments d ON e.dept_id = d.dept_id
WHERE d.dept_name IN ('ì˜ì—…ë¶€', 'ê¸°ìˆ ë¶€');

-- 4. ì§‘ê³„ + ì„œë¸Œì¿¼ë¦¬
SELECT dept_id, COUNT(*) AS cnt
FROM employees
WHERE salary > (
    SELECT AVG(salary) FROM employees
)
GROUP BY dept_id;

-- 5. ì—¬ëŸ¬ ì¡°ê±´ì˜ ì„œë¸Œì¿¼ë¦¬
SELECT name FROM employees
WHERE salary > (SELECT AVG(salary) FROM employees)
AND dept_id IN (
    SELECT dept_id FROM departments
    WHERE dept_name NOT IN ('ì¸ì‚¬ë¶€')
);
```

---

ì¡°ì •í˜„ êµìˆ˜ (peterchokr@gmail.com)
